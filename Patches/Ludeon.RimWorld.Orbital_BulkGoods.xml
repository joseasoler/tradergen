<?xml version="1.0" encoding="utf-8" ?>
<!-- Changes to the bulk goods orbital trader. -->
<Patch>
	<!-- Beer is replaced with the mod-friendly StockGen.Alcohol generator. -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_SingleDef" and
			thingDef="Beer"]
		</xpath>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationRemove">
					<xpath>
						/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_SingleDef"
						and
						thingDef="Beer"]
					</xpath>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators</xpath>
					<value>
						<li Class="TG.StockGen.Alcohol">
							<thingDefCountRange>0~2</thingDefCountRange>
							<totalPriceRange>50~300</totalPriceRange>
						</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	<!-- Prevent human leather, increase variety, increase stock slightly. -->
	<Operation Class="PatchOperationConditional">
		<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_Category" and
			categoryDef="Textiles"]
		</xpath>
		<match Class="PatchOperationSequence">
			<operations>
				<li Class="PatchOperationRemove">
					<xpath>
						/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_Category"
						and
						categoryDef="Textiles"]
					</xpath>
				</li>
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators</xpath>
					<value>
						<li Class="StockGenerator_Category">
							<categoryDef>Textiles</categoryDef>
							<excludedThingDefs>
								<!-- Handled exclusively by the cannibal specialization. -->
								<li>Leather_Human</li>
							</excludedThingDefs>
							<thingDefCountRange>3~5</thingDefCountRange>
							<totalPriceRange>1100~2000</totalPriceRange>
						</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
	<!-- Canned food makes more sense for orbital traders than raw food, as it does not require refrigeration.	-->
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Cooking Expanded</li>
		</mods>
		<match Class="PatchOperationConditional">
			<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_Category"
				and
				categoryDef="FoodRaw"]
			</xpath>
			<match Class="PatchOperationSequence">
				<operations>
					<li Class="PatchOperationRemove">
						<xpath>
							/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators/li[@Class="StockGenerator_Category"
							and categoryDef="FoodRaw"]
						</xpath>
					</li>
					<li Class="PatchOperationAdd">
						<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators</xpath>
						<value>
							<li Class="StockGenerator_SingleDef" MayRequire="VanillaExpanded.VCookE">
								<thingDef>VCE_CannedMeat</thingDef>
								<totalPriceRange>1000~1250</totalPriceRange>
							</li>
							<li Class="StockGenerator_SingleDef" MayRequire="VanillaExpanded.VCookE">
								<thingDef>VCE_CannedProduce</thingDef>
								<totalPriceRange>650~875</totalPriceRange>
							</li>
						</value>
					</li>
				</operations>
			</match>
		</match>
	</Operation>
	<!--
	May have some tools in stock.
	-->
	<Operation Class="PatchOperationAdd">
		<xpath>/Defs/TraderKindDef[defName="Orbital_BulkGoods"]/stockGenerators
		</xpath>
		<value>
			<li Class="TG.StockGen.MultiDef" MayRequire="VanillaExpanded.VWE">
				<thingDefs>
					<li>VWE_MeleeWeapon_Cleaver</li>
					<li>VWE_MeleeWeapon_Hammer</li>
					<li>VWE_MeleeWeapon_Pickaxe</li>
					<li>VWE_MeleeWeapon_Shovel</li>
					<li>VWE_MeleeWeapon_Wrench</li>
				</thingDefs>
				<thingDefCountRange>-1~2</thingDefCountRange>
				<countRange>1</countRange>
			</li>
			<li Class="StockGenerator_SingleDef" MayRequire="VanillaExpanded.VAEAccessories">
				<thingDef>VAEA_Apparel_ToolBelt</thingDef>
				<countRange>-2~1</countRange>
			</li>
		</value>
	</Operation>
</Patch>
