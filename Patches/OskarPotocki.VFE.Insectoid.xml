<?xml version="1.0" encoding="UTF-8"?>
<Patch>
	<Operation Class="PatchOperationFindMod">
		<mods>
			<li>Vanilla Factions Expanded - Insectoids</li>
		</mods>
		<match Class="PatchOperationSequence">
			<operations>
				<!-- Insectoid-themed specializations, unique to the bio-engineering supplier. -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<TG.TraderSpecializationDef>
							<defName>TG_InsectoidCraftsmanship</defName>
							<label>craftsmanship</label>
							<stockGens>
								<!-- Sells -->
								<li Class="TG.StockGen.StuffFromThingDef">
									<availableThingDefs>
										<li>VFEI_Chitin</li>
										<li MayRequire="sarg.alphaanimals">VFEI_Chitin</li>
										<li MayRequire="sarg.alphaanimals">VFEI_Chitin</li>
										<li MayRequire="sarg.alphaanimals">Leather_BlackChitin</li>
									</availableThingDefs>
									<maxTechLevelGenerate>Spacer</maxTechLevelGenerate>
									<stuffCountRange>0</stuffCountRange>
									<thingDefCountRange>8~11</thingDefCountRange>
									<countRange>1</countRange>
								</li>
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownMilkbeetle</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>1</kindCountRange>
									<countRange>2~3</countRange>
								</li>
								<!-- Purchases -->
								<li Class="StockGenerator_Category">
									<categoryDef>StoneBlocks</categoryDef>
								</li>
								<li Class="StockGenerator_Category">
									<categoryDef>ResourcesRaw</categoryDef>
								</li>
							</stockGens>
						</TG.TraderSpecializationDef>
						<TG.TraderSpecializationDef>
							<defName>TG_InsectoidDraper</defName>
							<label>draper</label>
							<stockGens>
								<!-- Sells -->
								<li Class="TG.StockGen.StuffFromThingDef">
									<availableThingDefs>
										<li>VFEI_Spidersilk</li>
									</availableThingDefs>
									<maxTechLevelGenerate>Spacer</maxTechLevelGenerate>
									<stuffCountRange>0</stuffCountRange>
									<thingDefCountRange>7~9</thingDefCountRange>
									<countRange>1</countRange>
								</li>
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownSpiderweaver</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>1</kindCountRange>
									<countRange>2~3</countRange>
								</li>
								<!-- Purchases -->
								<li Class="StockGenerator_Category">
									<categoryDef>Textiles</categoryDef>
								</li>
							</stockGens>
						</TG.TraderSpecializationDef>
						<TG.TraderSpecializationDef>
							<defName>TG_InsectoidGourmet</defName>
							<label>gourmet</label>
							<stockGens>
								<!-- Sells. -->
								<li Class="TG.StockGen.InsectMeat">
									<thingDefCountRange>1</thingDefCountRange>
									<totalPriceRange>800~1150</totalPriceRange>
								</li>
								<li Class="TG.StockGen.MultiDef">
									<thingDefs>
										<li>InsectJelly</li>
										<li>VFEI_RoyalInsectJelly</li>
										<li>VFEI_InsectMilk</li>
										<li>VFEI_EggInsectoidUnfertilized</li>
										<li MayRequire="sarg.alphaanimals">AA_BlackInsectJelly</li>
										<li MayRequire="VanillaExpanded.VCookE">VCE_InsectJellyPreserves</li>
									</thingDefs>
									<thingDefCountRange>3~4</thingDefCountRange>
									<totalPriceRange>600~920</totalPriceRange>
								</li>
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownMilkbeetle</li>
										<li>VFEI_VatGrownPrincess</li>
										<li>VFEI_VatGrownRoyalMaggot</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>1~2</kindCountRange>
									<totalPriceRange>400~700</totalPriceRange>
								</li>
								<li Class="StockGenerator_SingleDef" MayRequire="sumghai.Replimat">
									<thingDef>IsolinearModule</thingDef>
									<countRange>1</countRange>
								</li>
								<!-- Purchases -->
								<li Class="StockGenerator_Category">
									<categoryDef>FoodRaw</categoryDef>
									<excludedCategories>
										<li>EggsFertilized</li>
									</excludedCategories>
								</li>
								<li Class="TG.StockGen.Alcohol" />
								<li Class="TG.StockGen.Drugs">
									<drugCategory>Social</drugCategory>
								</li>
								<li Class="StockGenerator_Category" MayRequire="VanillaExpanded.VBrewE">
									<categoryDef>VBE_DrinksNonAlcoholic</categoryDef>
									<excludedThingDefs>
										<li MayRequire="VanillaExpanded.VBrewECandT">VBE_CannibalCoffee</li>
									</excludedThingDefs>
								</li>
								<li Class="StockGenerator_Category" MayRequire="VanillaExpanded.VCookE">
									<categoryDef>VCE_Condiments</categoryDef>
								</li>
							</stockGens>
						</TG.TraderSpecializationDef>
						<TG.TraderSpecializationDef>
							<defName>TG_InsectoidHunting</defName>
							<label>hunting</label>
							<stockGens>
								<!-- Sells -->
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownGigalocust</li>
										<li>VFEI_VatGrownGigascorpion</li>
										<li>VFEI_VatGrownMegapede</li>
										<li>VFEI_VatGrownMegascarab</li>
										<li>VFEI_VatgrownMegaspider</li>
										<li>VFEI_VatGrownSpelopede</li>
										<li>VFEI_VatGrownWargling</li>
										<li MayRequire="sarg.alphaanimals">AA_BlackScarab</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>3~4</kindCountRange>
									<totalPriceRange>300~600</totalPriceRange>
								</li>
								<li Class="StockGenerator_SingleDef">
									<thingDef>Kibble</thingDef>
									<totalPriceRange>600~1000</totalPriceRange>
								</li>
								<li Class="TG.StockGen.MultiDef">
									<thingDefs>
										<li>VFE_Apparel_RiotArmor</li>
										<li>VFE_Apparel_RiotHelmet</li>
										<li>VFEI_Shield_Riot</li>
										<li>Gun_BoltActionRifle</li>
										<li>Gun_SniperRifle</li>
										<li MayRequire="OskarPotocki.VanillaFactionsExpanded.SettlersModule">VFES_Gun_HuntingRifle</li>
									</thingDefs>
									<thingDefCountRange>2~3</thingDefCountRange>
									<countRange>1~2</countRange>
								</li>
								<!-- Purchases -->
								<li Class="StockGenerator_Animals">
									<maxWildness>0.70</maxWildness>
									<checkTemperature>false</checkTemperature>
									<tradeTagsBuy>
										<li>AnimalFighter</li>
										<li>AnimalPet</li>
										<li>AnimalUncommon</li>
										<li>AnimalExotic</li>
									</tradeTagsBuy>
								</li>
								<li Class="TG.StockGen.ExoticAnimalPart" />
							</stockGens>
						</TG.TraderSpecializationDef>
						<TG.TraderSpecializationDef>
							<defName>TG_InsectoidHusbandry</defName>
							<label>husbandry</label>
							<stockGens>
								<!-- Sells -->
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownMilkbeetle</li>
										<li>VFEI_VatGrownPrincess</li>
										<li>VFEI_VatGrownRoyalMaggot</li>
										<li>VFEI_VatGrownSpiderweaver</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>3~4</kindCountRange>
									<totalPriceRange>500~800</totalPriceRange>
								</li>
								<li Class="TG.StockGen.AnimalMultiDef">
									<pawnKindDefs>
										<li>VFEI_VatGrownCuterpillar</li>
									</pawnKindDefs>
									<newborn>true</newborn>
									<kindCountRange>1</kindCountRange>
									<countRange>1~2</countRange>
								</li>
								<li Class="StockGenerator_SingleDef">
									<thingDef>Kibble</thingDef>
									<totalPriceRange>600~1000</totalPriceRange>
								</li>
								<li Class="StockGenerator_SingleDef">
									<thingDef>Hay</thingDef>
									<totalPriceRange>600~1000</totalPriceRange>
								</li>
								<li Class="TG.StockGen.MultiDef" MayRequire="VanillaExpanded.VAPPE">
									<thingDefs>
										<li>VAE_Apparel_Overalls</li>
										<li>VAE_Apparel_FleeceShirt</li>
									</thingDefs>
									<thingDefCountRange>-2~1</thingDefCountRange>
									<countRange>1</countRange>
								</li>
								<li Class="StockGenerator_SingleDef" MayRequire="VanillaExpanded.VWE">
									<thingDef>VWE_Tool_Whip</thingDef>
									<countRange>-1~1</countRange>
								</li>
								<!-- Purchases -->
								<li Class="StockGenerator_Animals">
									<maxWildness>0.70</maxWildness>
									<checkTemperature>false</checkTemperature>
									<tradeTagsBuy>
										<li>AnimalFarm</li>
										<li>AnimalPet</li>
										<li>AnimalExotic</li>
									</tradeTagsBuy>
								</li>
							</stockGens>
						</TG.TraderSpecializationDef>
					</value>
				</li>
				<!-- New namer for bio-engineering suppliers. -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs</xpath>
					<value>
						<RulePackDef>
							<defName>TG_OrbitalNamerBioEngineering</defName>
							<include>
								<li>NamerTraderGeneral</li>
							</include>
							<rulePack>
								<rulesStrings>
									<li>r_name(p=4)->[InsectoidName] [GeneticBusinessType]</li>
									<li>r_name(p=2)->[InsectoidName] [businesstype]</li>
									<li>r_name(p=4)->[InsectoidAdjective] [GeneticBusinessType]</li>
									<li>r_name(p=2)->[InsectoidAdjective] [businesstype]</li>
									<li>r_name(p=2)->[InsectoidAdjective] [InsectoidName] [GeneticBusinessType]</li>
									<li>r_name->[InsectoidAdjective] [InsectoidName] [businesstype]</li>
								</rulesStrings>
								<rulesFiles>
									<li>GeneticBusinessType->Words/Nouns/TG_GeneticBusinessTypes</li>
									<li>InsectoidAdjective->Words/Insect</li>
									<li>InsectoidName->Words/Nouns/TG_InsectoidNames</li>
								</rulesFiles>
							</rulePack>
						</RulePackDef>
					</value>
				</li>
				<!-- Specializations and custom namer for the bio-engineering supplier. -->
				<li Class="PatchOperationAddModExtension">
					<xpath>/Defs/TraderKindDef[defName="VFEI_Orbital_BioEngineeringSupplier"]</xpath>
					<value>
						<li Class="TG.GenExtension">
							<specializations>
								<li>
									<def>TG_InsectoidCraftsmanship</def>
									<commonality>10.0</commonality>
								</li>
								<li>
									<def>TG_InsectoidDraper</def>
									<commonality>10.0</commonality>
								</li>
								<li>
									<def>TG_InsectoidGourmet</def>
									<commonality>10.0</commonality>
								</li>
								<li>
									<def>TG_InsectoidHunting</def>
									<commonality>10.0</commonality>
								</li>
								<li>
									<def>TG_InsectoidHusbandry</def>
									<commonality>10.0</commonality>
								</li>
								<li>
									<def>TG_Wealth</def>
									<commonality>5.0</commonality>
								</li>
							</specializations>
							<extraNameRules>TG_OrbitalNamerBioEngineering</extraNameRules>
						</li>
					</value>
				</li>
				<!-- Increase the pool of items that bio-engineering suppliers are willing to buy. -->
				<li Class="PatchOperationAdd">
					<xpath>/Defs/TraderKindDef[defName="VFEI_Orbital_BioEngineeringSupplier"]/stockGenerators</xpath>
					<value>
						<li Class="TG.StockGen.MultiDef">
							<thingDefs>
								<li>InsectJelly</li>
								<li>Kibble</li>
								<li>VFEI_RoyalInsectJelly</li>
								<li MayRequire="VanillaExpanded.VCookE">VCE_InsectJellyPreserves</li>
								<li MayRequire="sarg.alphaanimals">AA_BlackInsectJelly</li>
							</thingDefs>
						</li>
						<!--
						Purchases some really expensive and easily resellable items. 56 is chosen to prevent it from purchasing
						mortar shells.
						-->
						<li Class="TG.StockGen.ExpensiveSimple">
							<minValuePerUnit>56</minValuePerUnit>
						</li>
						<li Class="StockGenerator_BuyTradeTag">
							<tag>ExoticBuilding</tag>
						</li>
					</value>
				</li>
			</operations>
		</match>
	</Operation>
</Patch>